import{a as M}from"/build/_shared/chunk-L5VKHY6F.js";import{b}from"/build/_shared/chunk-WBY45DIQ.js";import{b as f,c as w,q as x}from"/build/_shared/chunk-YTHO3L5P.js";var m=f(w());var c=f(w(),1),u=new Map;function C(e,t){let o=t?.serializer,[s]=(0,c.useState)(t?.defaultValue);return _(e,s,t?.storageSync,o?.parse,o?.stringify)}function _(e,t,o=!0,s=J,a=JSON.stringify){let i=(0,c.useRef)({string:null,parsed:void 0}),d=(0,c.useSyncExternalStore)((0,c.useCallback)(n=>{let r=l=>{e===l&&n()};return P.add(r),()=>{P.delete(r)}},[e]),()=>{var n;let r=(n=h(()=>localStorage.getItem(e)))!==null&&n!==void 0?n:null;if(u.has(e))i.current.parsed=u.get(e);else if(r!==i.current.string){let l;try{l=r===null?t:s(r)}catch{l=t}i.current.parsed=l}return i.current.string=r,r===null&&t!==void 0&&h(()=>{let l=a(t);localStorage.setItem(e,l),i.current={string:l,parsed:t}}),i.current.parsed},()=>t),p=(0,c.useCallback)(n=>{let r=n instanceof Function?n(i.current.parsed):n;try{localStorage.setItem(e,a(r)),u.delete(e)}catch{u.set(e,r)}L(e)},[e,a]);return(0,c.useEffect)(()=>{if(!o)return;let n=r=>{r.storageArea===h(()=>localStorage)&&r.key===e&&L(e)};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[e,o]),(0,c.useMemo)(()=>[d,p,{isPersistent:d===t||!u.has(e),removeItem(){h(()=>localStorage.removeItem(e)),u.delete(e),L(e)}}],[e,p,d,t])}var P=new Set;function L(e){for(let t of[...P])t(e)}function J(e){return e==="undefined"?void 0:JSON.parse(e)}function h(e){try{return e()}catch{}}var I=C;var g=f(w()),z=()=>{let[e,t]=g.useState(()=>{if(typeof window>"u")return"no-preference";let o=window.matchMedia("(prefers-color-scheme: dark)"),s=window.matchMedia("(prefers-color-scheme: light)");return o.matches?"dark":s.matches?"light":"no-preference"});return g.useEffect(()=>{if(typeof window.matchMedia!="function")return;let o=window.matchMedia("(prefers-color-scheme: dark)"),s=window.matchMedia("(prefers-color-scheme: light)");if(typeof s.addEventListener=="function"){let a=({matches:d})=>{d&&t("dark")},i=({matches:d})=>{d&&t("light")};return o.addEventListener("change",a),s.addEventListener("change",i),()=>{o.removeEventListener("change",a),s.removeEventListener("change",i)}}if(typeof s.addListener=="function"){let a=()=>t(o.matches?"dark":s.matches?"light":"no-preference");return o.addListener(a),s.addListener(a),()=>{o.removeListener(a),s.removeListener(a)}}},[]),e},T=z;var v=f(x()),N=(0,m.createContext)({}),B=()=>(0,m.useContext)(N),G=({children:e,...t})=>{let o=typeof window>"u",{modalHelperClasses:s,modalIsOpen:a,scrollbarIsVisible:i,scrollbarWidth:d}=M(),n=T()==="dark"?"dark":"light",[r,l]=I("picoColorScheme",null),[S,E]=(0,m.useState)("light"),O=()=>{l(S==="dark"?"light":"dark")};return(0,m.useEffect)(()=>{E(r||n)},[r,n]),(0,v.jsx)(N.Provider,{value:{isSSR:o,pageTheme:S,switchTheme:O,systemPrefersColorScheme:n},...t,children:(0,v.jsx)("html",{lang:"en",...r&&{"data-theme":r},...a&&{className:s},...a&&i&&{style:{"--pico-scrollbar-width":`${d}px`}},children:(0,v.jsx)(b,{children:e})})})};export{B as a,G as b};