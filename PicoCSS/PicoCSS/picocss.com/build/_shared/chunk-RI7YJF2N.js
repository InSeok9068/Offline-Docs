import{a as R}from"/build/_shared/chunk-GL7VW4BM.js";import{a as y}from"/build/_shared/chunk-OLA7NHCU.js";import{b as h,c as $,q as w}from"/build/_shared/chunk-YTHO3L5P.js";var u=h($());function C(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function b(r,e,n){return e&&C(r.prototype,e),n&&C(r,n),r}function T(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,m(r,e)}function m(r,e){return m=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},m(r,e)}var H=function(){},I=function(r){T(e,r);function e(t){var o;return o=r.call(this)||this,o.el=t,o}var n=e.prototype;return n.isScrolledToBottom=function(){return this.scrollTop+this.outerHeight>=this.scrollHeight},n.registerScrollEvent=function(o){this.el.addEventListener("scroll",o)},n.unregisterScrollEvent=function(o){this.el.removeEventListener("scroll",o)},e.create=function(o){var l=document.querySelector(o);if(!l)throw new Error("element is not found.");return new e(l)},b(e,[{key:"top",get:function(){return this.el.getBoundingClientRect().top}},{key:"outerHeight",get:function(){return this.el.getBoundingClientRect().height}},{key:"scrollTop",get:function(){return this.el.scrollTop}},{key:"scrollHeight",get:function(){return this.el.scrollHeight}}]),e}(H),B=function(r){T(e,r);function e(){return r.apply(this,arguments)||this}var n=e.prototype;return n.isScrolledToBottom=function(){return this.scrollTop+this.outerHeight>=this.scrollHeight},n.registerScrollEvent=function(o){document.addEventListener("scroll",o)},n.unregisterScrollEvent=function(o){document.removeEventListener("scroll",o)},e.create=function(){return new e},b(e,[{key:"outerHeight",get:function(){return window.innerHeight}},{key:"scrollTop",get:function(){return document.documentElement.scrollTop}},{key:"scrollHeight",get:function(){return document.documentElement.scrollHeight}}]),e}(H),k=function(){function r(){}return r.create=function(n){return n?I.create(n):B.create()},r}(),O=function(e){var n=e.sectionRefs,t=e.rootSelector,o=e.offset,l=o===void 0?0:o,i=(0,u.useRef)(null);(0,u.useEffect)(function(){i.current=k.create(t)},[t]);var c=(0,u.useCallback)(function(){return i.current?i.current.isScrolledToBottom():!1},[i]),d=(0,u.useCallback)(function(g){if(!i.current)return!1;var s=i.current.scrollTop,M=s+i.current.outerHeight,v=g.getBoundingClientRect(),S=i.current instanceof I?s+v.top-i.current.top+l:s+v.top+l,N=S+v.height;return[S<M,N>s].every(function(L){return L})},[i,l]),p=(0,u.useCallback)(function(){return n.map(function(g){return g.current?d(g.current):!1})},[d,n]),E=(0,u.useState)([]),P=E[0],V=E[1],A=(0,u.useMemo)(function(){return P.findIndex(function(g){return g})},[P]),f=(0,u.useCallback)(function(){var g=c()?[].concat(new Array(n.length-1).fill(!1).map(function(s){return s}),[!0]):p();V(g)},[p,c,n]);return(0,u.useEffect)(function(){return f(),i.current&&i.current.registerScrollEvent(f),function(){i.current&&i.current.unregisterScrollEvent(f)}},[f]),{elementsStatusInViewport:P,currentElementIndexInViewport:A}},x=function(e){var n=e.children,t=e.sectionRefs,o=e.rootSelector,l=e.offset,i=O({sectionRefs:t,rootSelector:o,offset:l}),c=i.elementsStatusInViewport,d=i.currentElementIndexInViewport;return n({elementsStatusInViewport:c,currentElementIndexInViewport:d})};var a=h(w());function _({data:r,...e}){let{headerHeight:n}=R(),t=r.map(o=>o.ref);return(0,a.jsx)("aside",{id:"table-of-contents",...e,children:(0,a.jsx)(x,{sectionRefs:t,offset:-(n*2),children:({currentElementIndexInViewport:o})=>(0,a.jsx)("nav",{className:"is-sticky-above-lg ",children:(0,a.jsxs)("details",{open:!0,children:[(0,a.jsx)("summary",{children:"Content"}),(0,a.jsx)("ul",{children:r.map((l,i)=>(0,a.jsx)("li",{children:(0,a.jsx)(y,{to:`#${l.anchor}`,className:"secondary",...o===i&&{"aria-current":!0},children:l.title})},l.anchor))})]})})})})}export{_ as a};